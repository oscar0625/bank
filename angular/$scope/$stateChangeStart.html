<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/angular-1.3.9.js"></script>
    <script src="js/angular-ui-router-0.2.18.js"></script>
</head>
<body>
<div ng-app="app" ng-controller="ctrl">
    <a ui-sref="a">a</a>
    <a ui-sref="b">b</a>
    <div ui-view></div>
</div>
</body>
<script>
    /*
    几个事件名：()
     0. 当作用域销毁时触发
     $scope.$on('$destroy',function () {});
     1. 页面开始加载时, 触发的事件名
     $locationChangeStart //只要加载页面开始就触发(只要涉及页面就会触发一次)
     $routeChangeStart // ngRoute 开始请求页面时触发
     $stateChangeStart  // ui-router 开始请求页面时触发
     2. 页面加载完成时, 触发的事件名(本次进度条中 $stateChangeSuccess会等到resolve完成之后触发)
     $locationChangeSuccess //只要加载页面完成就触发
     $routeChangeSuccess ngRoute  // ngRoute 请求页面完成时触发
     $stateChangeSuccess // ui-router 请求页面完成时触发

     example:
     $scope.$on('$stateChangeStart',function () {});
     $scope.$on('$stateChangeSuccess',function () {});
     $scope.$on('$locationChangeStart',function () {});
     $scope.$on('$locationChangeSuccess',function () {});
    */
    angular.module('app',['ui.router'])
            .controller('ctrl',function ($scope) {
                $scope.$on('$stateChangeStart',function () {
                    console.log('start')
                });
                $scope.$on('$stateChangeSuccess',function () {
                    console.log('success')
                });
            })
            .config(function ($stateProvider,$urlRouterProvider) {
//                $urlRouterProvider.otherwise('/a');
                $stateProvider
                        .state('a',{
                            url:'/a',
                            templateUrl:'./a.html',
                            controller:['$scope','getOne',function ($scope,getOne) {
                                console.log(getOne.data);
                            }],
                            resolve:{
                                getOne:function ($http,$stateParams) {
                                    return $http.get('a1.php')
                                }
                            }
                        })
                        .state('b',{
                            url:'/b',
                            templateUrl:'./b.html',
                            controller:function ($scope) {
                            }
                        })
            })
</script>
</html>