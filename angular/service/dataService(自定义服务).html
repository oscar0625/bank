<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/angular-1.3.9.js"></script>
</head>
<body>
<div ng-app="app" ng-controller="ctrl"></div>
</body>
<script>
    angular.module('app', [])
        .controller('ctrl', ['$scope', 'dataService', function ($scope, dataService) {
            $scope.a = 1;
            /*1*/
            dataService.getData().success(function (data) {
                console.log(data)
            });
            /*2*/
//              dataService.getData(function (data) {
//                  console.log(data)
//              })
            /*3*/
//            dataService.getData().then(function (data) {
//                console.log(data);
//            });
        }])

        /*一  像构造函数 dataService是函数的一个实例*/
        .service('dataService', ['$http', '$q', function($http,$q) {
                this.getData = function (callback) {
                    /*解决Ajax 的异步请求调用时候的问题*/
                    /*一 返回promise*/
//                    var promise=$http.get('table.php',{params:{name: '大腾腾', age: 76}})
//                    return promise;
                    /*二 回调*/
//                    $http.post('table.php',{name: '大腾腾', age: 76}).success(function (data) {
//                        callback(data)
//                    })
                    /*三*/
                    //创建延迟对象
//                    var delay = $q.defer();
//                    //需要解决的事
//                    delay.resolve($http.get('table.php', {params: {name: '大腾腾', age: 76}}));
//                    //延迟对象的承诺
//                    return delay.promise;
                }
            }])
    /*二 dataService是函数返回的那个对象*/
    //        .factory('dataService', ['$http', function ($http) {
    //            var p = {name: '大腾腾', age: 76};
    //            return{
    //                getData:function () {
    //                    return p
    //                }
    //            }
    //        }])
    /*provider 必须定义 $get 方法 为返回的对象*/
//            .provider('dataService2',function () {
//                var p={name: 'nick nick nick', age: 38};
//                this.$get=function ($http) {
//                    return{
//                        getData: function () {
//                            return p
//                        }
//                    }
//                }
//            })
</script>
</html>